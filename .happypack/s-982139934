import _extends from 'babel-runtime/helpers/extends';

import Vue from 'vue';
import 'babel-polyfill';
import App from './App';

import 'bfe-ui/lib/theme/index.css';
import './assets/common.css';
import 'normalize.css/normalize.css';
import '@assets/bfeui/css/global.css';

import BfeUI from 'bfe-ui';
import BfeCharts from 'bfe-charts';

import router from './router';
import store from './store';
import axios from 'axios';
import VueHttp from './util/http/vue-http';
import CommonUtil from './util/commonutil';
import VueI18n from 'vue-i18n';
import messages from './i18n';

import './mock';

Vue.use(VueI18n);

Vue.use(VueHttp, axios);

Vue.use(CommonUtil);

var _i18n = new VueI18n({
  locale: 'zh',
  messages: messages
});

Vue.use(BfeUI, {
  i18n: function i18n(key, opt) {
    _i18n.t(key, opt);
  }
});

Vue.use(BfeCharts);

var vm = new Vue(_extends({
  el: '#app',
  router: router,
  store: store,
  i18n: _i18n
}, App));

vm.$watch(function () {
  return this.$i18n.locale;
}, function (newVal) {
  store.dispatch('saveLocale', newVal);
});