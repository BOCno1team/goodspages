{"version":3,"sources":["src\\util\\http\\vue-http.js"],"names":["config","bfwConfig","vueHttp","install","Vue","axios","installed","_settings","bfwInstance","create","prototype","get","$http","$bfw","httpConfig","timeout","defaults","contentType","headers","post","interceptors","request","use","reqInterceptors","error","reject","response","resInterceptors"],"mappings":";;AAAA,OAAOA,MAAP,MAAmB,uBAAnB;;AAEA,OAAOC,SAAP,MAAsB,sBAAtB;;AAQA,IAAIC,UAAU,EAAd;;AAEAA,QAAQC,OAAR,GAAkB,UAASC,GAAT,EAAcC,KAAd,EAAqB;AACrC,MAAIH,QAAQI,SAAZ,EAAuB;AACrB,WAAO,KAAP;AACD;;AAED,MAAI,CAACD,KAAL,EAAY;AACV,WAAO,KAAP;AACD;;AAEDH,UAAQK,SAAR,CAAkBF,KAAlB,EAAyBL,MAAzB;;AAEAI,MAAIC,KAAJ,GAAYA,KAAZ;;AAEA,MAAIG,cAAcH,MAAMI,MAAN,EAAlB;;AAEAP,UAAQK,SAAR,CAAkBC,WAAlB,EAA+BP,SAA/B;;AAEA,2BAAwBG,IAAIM,SAA5B,EAAuC;AACrCL,WAAO;AACLM,SADK,iBACC;AACJ,eAAON,KAAP;AACD;AAHI,KAD8B;AAMrCO,WAAO;AACLD,SADK,iBACC;AACJ,eAAON,KAAP;AACD;AAHI,KAN8B;AAWrCQ,UAAM;AACJF,SADI,iBACE;AACJ,eAAOH,WAAP;AACD;AAHG;AAX+B,GAAvC;AAiBD,CAlCD;;AA2CAN,QAAQK,SAAR,GAAoB,UAASF,KAAT,EAAgBS,UAAhB,EAA4B;AAC9C,MAAIA,WAAWC,OAAf,EAAwB;AACtBV,UAAMW,QAAN,CAAeD,OAAf,GAAyBD,WAAWC,OAApC;AACD;AACD,MAAID,WAAWG,WAAf,EAA4B;AAC1BZ,UAAMW,QAAN,CAAeE,OAAf,CAAuBC,IAAvB,CAA4B,cAA5B,IAA8CL,WAAWG,WAAzD;AACD;;AAEDZ,QAAMe,YAAN,CAAmBC,OAAnB,CAA2BC,GAA3B,CAA+BR,WAAWS,eAA1C,EAA2D,UAACC,KAAD,EAAW;AACpE,WAAO,SAAQC,MAAR,CAAeD,KAAf,CAAP;AACD,GAFD;;AAIAnB,QAAMe,YAAN,CAAmBM,QAAnB,CAA4BJ,GAA5B,CAAgCR,WAAWa,eAA3C,EAA4D,UAACH,KAAD,EAAW;AACrE,WAAO,SAAQC,MAAR,CAAeD,KAAf,CAAP;AACD,GAFD;AAGD,CAfD;;AAiBA,eAAetB,OAAf","file":"vue-http.js","sourceRoot":"d:/goods/goodspages","sourcesContent":["import config from './http.default.config'\n\nimport bfwConfig from './http.bfw.config.js'\n\n/**\n * Install plugin\n * @param Vue\n * @param axios\n */\n\nvar vueHttp = {};\n\nvueHttp.install = function(Vue, axios) {\n  if (vueHttp.installed) {\n    return false;\n  }\n\n  if (!axios) {\n    return false;\n  }\n\n  vueHttp._settings(axios, config);\n\n  Vue.axios = axios;\n\n  var bfwInstance = axios.create();\n\n  vueHttp._settings(bfwInstance, bfwConfig);\n\n  Object.defineProperties(Vue.prototype, {\n    axios: {\n      get() {\n        return axios;\n      }\n    },\n    $http: {\n      get() {\n        return axios;\n      }\n    },\n    $bfw: {\n      get() {\n        return bfwInstance;\n      }\n    }\n  })\n}\n\n/**\n * vue http设置 - 可以根据config设置指定的axios实例\n * @author pangjian\n * @param  {Object} axios      axios实例\n * @param  {Object} httpConfig 配置信息\n * @return {Object} 返回一个Promise\n */\nvueHttp._settings = function(axios, httpConfig) {\n  if (httpConfig.timeout) {\n    axios.defaults.timeout = httpConfig.timeout;\n  }\n  if (httpConfig.contentType) {\n    axios.defaults.headers.post['Content-Type'] = httpConfig.contentType;\n  }\n  // 请求发送拦截器\n  axios.interceptors.request.use(httpConfig.reqInterceptors, (error) => {\n    return Promise.reject(error);\n  });\n  // 请求返回拦截器\n  axios.interceptors.response.use(httpConfig.resInterceptors, (error) => {\n    return Promise.reject(error);\n  });\n}\n\nexport default vueHttp\n"]}